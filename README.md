# Тестирующая система
Система для автоматической проверки решений на составленных тестах.
Идея взята с [Yandex LMS](https://lyceum.yandex.ru/), [Codeforces](https://codeforces.com/), [acmp.ru](https://acmp.ru/)
Поддреживаются все популярные ЯП: Python, Java, C, C#, C++.
## Настройка
Для начала работы необходимо внести изменения в файле config/test_program.json.
Для каждого ЯП укажите местоположение на диске компилятора (обратите внимание, что для Java нужно 2 пути).
Если компилятор отсутствует, то можете оставить поле пустым, тогда при выборе данного ЯП будет выдаваться вердикт ServerError.
Если в приложении нужна регистрация учеников, поменяйте поля mail_login и mail_password на логин и пароль от почты (тестировался гугл аккаунт) для сервисной отправки регистрационного письма.
Поле run_as_user_linux меняйте только в том случае, если вы запускаете приложение в ОС Linux (см. [Настройка для линукс](#Настройка-безопасности-для-линукс)).
Для запуска приложения запускаем файл main.py.
## Учетные записи
Приложение предусматривает несколько уровней учетных записей:
- ученик
- учитель (дополнительно имеет права на составление, редактирование своих задач, 
редактирование [групп](#Группы) и [сессий](#Сессии))
- администратор (дополнительно имеет права на редактирование категорий задач)

С повышением уровня учетной записи права пользователя не ограничиваются, то есть учитель так же, как и ученик может отправлять задачи на проверку или выполнять любые другие действия от имени ученика.
## Задача
Для добавления задачи, необходимо описать условие задачи, при необходимости вставить изображения, установить ограничение по времени выполнения, по памяти, а также добавить тесты для проверки.
## Формат тестов
Тесты для автоматической проверки необходимо загружать в виде архива с расширением .zip:
- последовательность запуска тестов соответствует алфивитному расположению имен файлов.
- на каждый тест по 2 файла с расширениями .in и .out c одинаковым именем до расширения.

Пример архива:
File "tests.zip":<br>
01.in<br>
01.out<br>
02.in<br>
02.out<br>
03.in<br>
03.out
## Сессии
Сессия объединяет несколько пользователей для проведения мероприятия по решению задач (контрольная работа, самостоятельная работа, олимпиада и так далее)
Параметры настраиваются учителем.
У каждой сессии может быть назначен уникальный идентификатор для приглашения на вступление, по которому любой пользователь сможет отправить приглашение на вступление в сессию создателю сессии.
Только с разрешения создателя сессии выполняется набор участников.
Уникальный идентификатор для приглашения создан для упрощения добавления большого количества пользователей.
## Группы
Приглашение в группу пользователей аналогично сессии.
Группы созданы с целью объединения нескольких пользователей, для которых требуется многократное создание сессий или наблюдение за профилем.
С помощью создания групп можно сразу загрузить всех пользователей, состоящих в данной группе, в сессию.
## Приглашения
На вкладке "Action" в приложении можно отправить запрос на приглашение в определенную группу или сессию, введя идентификатор, сообщенный организатором.
## Настройка безопасности для линукс
Если вы просто тестируете работу функций приложения, пропустите этот пункт.
В Windows придется также пропустить этот этап настройки, хотя для пригодного использования (для релиза) он необходим.
В исходном коде решения может содержаться различный небезопасный код.
Для предотвращения выполнения ненужных команд в командной оболочке и чтения, записи данных в файлы выполним следующие шаги:
- создаем нового пользователя и узнаем его uid c помощью команды "cat /etc/passwd"
- в файл конфигураций в поле run_as_user_linux пишем этот uid.
- запускаем файл main.py c необязательным аргументом --init_user для ограничения прав созданного пользователя.
- устанавливаем компонент, с помощью которого будет производится запуск исходного кода также для безопасности и ограничения прав с помощью команды "apt-get install firejail"

Теперь все решения, посланные на проверку будут запускаться от имени пользоветеля с ограниченными правами.